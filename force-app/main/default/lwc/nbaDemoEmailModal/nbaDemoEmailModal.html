<template>
    <section class="modal-backdrop" onclick={handleClose}>
        <div class="modal-container" onclick={stopPropagation}>
            <div class="modal-header">
                <h2 class="modal-title">Send Email</h2>
                <button class="close-btn" onclick={handleClose}>&#x2715;</button>
            </div>
            <div class="modal-body">
                <lightning-combobox
                    label="To"
                    value={selectedContactId}
                    options={contactOptions}
                    onchange={handleContactChange}>
                </lightning-combobox>
                <lightning-combobox
                    label="Template"
                    value={selectedTemplateId}
                    options={templateOptions}
                    onchange={handleTemplateChange}
                    class="slds-m-top_small">
                </lightning-combobox>
                <lightning-input
                    label="Subject"
                    value={emailSubject}
                    onchange={handleSubjectChange}
                    class="slds-m-top_small">
                </lightning-input>
                <div class="slds-m-top_small">
                    <label class="slds-form-element__label">Body</label>
                    <lightning-input-rich-text
                        value={emailBody}
                        onchange={handleBodyChange}
                        class="email-body-area">
                    </lightning-input-rich-text>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick={handleClose}>Cancel</button>
                <button class="send-btn" onclick={handleSend} disabled={isSending}>
                    <template if:true={isSending}>
                        <lightning-spinner alternative-text="Sending" size="small"></lightning-spinner>
                    </template>
                    <template if:false={isSending}>
                        Send Email
                    </template>
                </button>
            </div>
        </div>
    </section>
</template>
